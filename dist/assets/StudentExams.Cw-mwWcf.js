import{v as b,r as a,A as h,j as e}from"./index.UZcXu8dh.js";const y=()=>{const r=b(),[n,x]=a.useState([]),[g,i]=a.useState(!0),[d,l]=a.useState(""),[o,c]=a.useState("");a.useEffect(()=>{m(),r.state&&r.state.message&&(c(r.state.message),setTimeout(()=>c(""),5e3),window.history.replaceState({},document.title))},[]);const m=async()=>{i(!0);try{const t=await(await fetch(`${h}/cbt/student-exams?action=list`,{credentials:"include"})).json();t.success?x(t.exams):l(t.message||"Failed to load exams")}catch(s){l("Failed to load exams"),console.error("Load exams error:",s)}finally{i(!1)}},u=s=>({available:"bg-green-100 text-green-800",upcoming:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",expired:"bg-red-100 text-red-800",completed:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",p=s=>({available:"Available",upcoming:"Upcoming",in_progress:"In Progress",expired:"Expired",completed:"Completed"})[s]||s;return g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading exams..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My CBT Exams"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"View and take your assigned computer-based tests"})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:d}),o&&e.jsx("div",{className:"bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded mb-6",children:o}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center text-gray-500",children:"No exams assigned yet."}):n.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.exam_title}),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${u(s.status)}`,children:p(s.status)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:s.subject}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.total_marks," marks"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.duration_minutes," minutes"]})]}),s.start_datetime&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Available: ",new Date(s.start_datetime).toLocaleString()," - ",new Date(s.end_datetime).toLocaleString()]}),s.status==="in_progress"&&s.time_remaining&&e.jsxs("p",{className:"text-sm text-orange-600 mt-2 font-medium",children:["⏱ Time remaining: ",s.time_remaining," minutes"]})]}),e.jsxs("div",{className:"ml-4",children:[(s.status==="available"||s.status==="in_progress")&&e.jsx("a",{href:`/student/take-exam/${s.id}`,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-block",children:s.status==="in_progress"?"Continue Exam":"Start Exam"}),s.status==="upcoming"&&e.jsx("button",{disabled:!0,className:"px-6 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed inline-block",title:"Exam has not started yet",children:"Not Started"}),s.status==="expired"&&e.jsx("button",{disabled:!0,className:"px-6 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed inline-block",title:"Exam has expired",children:"Expired"}),s.status==="completed"&&e.jsx("a",{href:`/student/results/${s.id}`,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 inline-block",children:"View Results"})]})]})},s.id))})]})};export{y as default};
