import{u as x,w as h,r as m,j as e,A as g}from"./index.UZcXu8dh.js";function f(){const l=x(),{toast:s}=h(),[i,d]=m.useState(!1),[r,c]=m.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),a=o=>{const{name:t,value:n}=o.target;c(u=>({...u,[t]:n}))},p=async o=>{if(o.preventDefault(),!r.name||!r.email||!r.phone||!r.password){s.error("Please fill in all required fields");return}if(r.password!==r.confirmPassword){s.error("Passwords do not match");return}if(r.password.length<6){s.error("Password must be at least 6 characters");return}d(!0);try{const n=await(await fetch(`${g}/parents/create`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:r.name,email:r.email,phone:r.phone,password:r.password})})).json();n.success?(s.success("Parent added successfully"),c({name:"",email:"",phone:"",password:"",confirmPassword:""}),setTimeout(()=>{l("/dashboard/view-parents")},1500)):s.error(n.message||"Failed to add parent")}catch(t){console.error("Error adding parent:",t),s.error("Error adding parent. Please try again.")}finally{d(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Parent"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new parent account"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Parent Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter parent's full name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"parent@example.com",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This email will be used for login"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"08012345678",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",name:"password",value:r.password,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Minimum 6 characters",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:a,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Re-enter password",required:!0})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-primary-500 p-4 rounded",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-primary-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:'After creating the parent account, link students to this parent in "Manage Parents"'}),e.jsx("li",{children:"Parents can login to the mobile app using their email and password"}),e.jsx("li",{children:"Parents will be able to view their children's information and pay school fees"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>l("/dashboard/view-parents"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Parent"]})})]})]})})]})}export{f as default};
