import{E as j,u as y,v,w as S,r as o,j as e}from"./index.UZcXu8dh.js";import{S as E}from"./StudentForm.Bnn39uoG.js";import{f as N,d as R}from"./api.CIjYu6Aj.js";function F({school:i}){const{id:c}=j(),r=y(),m=v(),{toast:s}=S(),[l,p]=o.useState(null),[x,u]=o.useState(!1),[f,h]=o.useState(!0),a=m.pathname.startsWith("/teacher");o.useEffect(()=>{g()},[c]);const g=async()=>{try{h(!0);const t=await N(c);t.success?p(t.data):(s.error("Error loading report: "+t.message),r(a?"/teacher/students":"/dashboard/students"))}catch(t){console.error("Error:",t),s.error("Failed to load report for editing. Please try again."),r(a?"/teacher/students":"/dashboard/students")}finally{h(!1)}},b=async t=>{u(!0);try{const n={...t,school_id:i.id},d=await R(n);d.success?(s.success("Report card updated successfully!"),r(`${a?"/teacher":"/dashboard"}/reports/${d.student_id}`)):s.error("Error updating report card: "+d.message)}catch(n){console.error("Error:",n),s.error("Failed to update report card. Please try again.")}finally{u(!1)}};return f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):l?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>r(a?"/teacher/students":"/dashboard/students"),className:"text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Students"]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Edit Report Card"}),e.jsx(E,{onSubmit:b,saving:x,school:i,initialData:l})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Report not found"})})}export{F as default};
