import{r as a,A as m,j as e,L as i}from"./index.UZcXu8dh.js";const p=()=>{const[t,c]=a.useState(null),[l,x]=a.useState(!0),[d,n]=a.useState("");a.useEffect(()=>{o()},[]);const o=async()=>{try{const r=await(await fetch(`${m}/cbt/analytics`,{credentials:"include"})).json();r.success?c(r):n(r.message||"Failed to load analytics")}catch(s){n("Failed to load analytics"),console.error("Analytics error:",s)}finally{x(!1)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CBT Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Computer-Based Testing Analytics & Overview"})]}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),l&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!l&&t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-green-600 rounded-lg border-2 border-green-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Total Questions"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t.stats.total_questions})]}),e.jsx("div",{className:"bg-green-700 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-primary-500 rounded-lg border-2 border-primary-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm font-medium",children:"Published Exams"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t.stats.published_exams}),e.jsxs("p",{className:"text-primary-100 text-xs mt-1",children:[t.stats.draft_exams," drafts"]})]}),e.jsx("div",{className:"bg-primary-600 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),e.jsx("div",{className:"bg-green-600 rounded-lg border-2 border-green-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed Attempts"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t.stats.completed_attempts}),e.jsxs("p",{className:"text-green-100 text-xs mt-1",children:[t.stats.in_progress_attempts," in progress"]})]}),e.jsx("div",{className:"bg-green-700 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-primary-500 rounded-lg border-2 border-primary-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm font-medium",children:"Average Score"}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[t.stats.average_score,"%"]}),e.jsxs("p",{className:"text-primary-100 text-xs mt-1",children:[t.stats.total_students_participated," students"]})]}),e.jsx("div",{className:"bg-primary-600 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})]}),t.stats.completed_attempts>0&&e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Grade Distribution"}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.grade_distribution.grade_a})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade A"}),e.jsx("p",{className:"text-xs text-gray-500",children:"80-100%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-primary-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-primary-600",children:t.grade_distribution.grade_b})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade B"}),e.jsx("p",{className:"text-xs text-gray-500",children:"70-79%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-yellow-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:t.grade_distribution.grade_c})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade C"}),e.jsx("p",{className:"text-xs text-gray-500",children:"60-69%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:t.grade_distribution.grade_d})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade D"}),e.jsx("p",{className:"text-xs text-gray-500",children:"50-59%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-pink-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-pink-600",children:t.grade_distribution.grade_e})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade E"}),e.jsx("p",{className:"text-xs text-gray-500",children:"40-49%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 rounded-lg p-4 mb-2",children:e.jsx("p",{className:"text-3xl font-bold text-red-600",children:t.grade_distribution.grade_f})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Grade F"}),e.jsx("p",{className:"text-xs text-gray-500",children:"0-39%"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Exams"}),t.recent_exams.length>0?e.jsx("div",{className:"space-y-4",children:t.recent_exams.map(s=>e.jsxs("div",{className:"border-l-4 border-primary-500 pl-4 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.exam_title}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:s.is_published?"Published":"Draft"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:s.subject})," â€¢ ",e.jsx("span",{children:s.class})," â€¢ ",e.jsx("span",{children:s.assessment_type})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:[s.completed,"/",s.total_attempts," completed"]}),e.jsxs("span",{children:["Avg: ",s.avg_score,"%"]}),e.jsxs("span",{children:[s.completion_rate,"% completion"]})]})]},s.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No exams created yet"})]}),e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Performance by Subject"}),t.subject_performance.length>0?e.jsx("div",{className:"space-y-3",children:t.subject_performance.slice(0,5).map((s,r)=>e.jsxs("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.subject}),e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[s.avg_score,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s.avg_score}%`}})}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[s.exam_count," exams"]}),e.jsxs("span",{children:[s.attempt_count," attempts"]})]})]},r))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"No exam attempts yet"})]})]}),t.class_performance.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Performance by Class"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.class_performance.map((s,r)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.class}),e.jsx("div",{className:`w-3 h-3 rounded-full ${s.avg_score>=70?"bg-green-600":s.avg_score>=50?"bg-primary-500":"bg-red-500"}`})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 mb-1",children:[s.avg_score,"%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.attempt_count," attempts"]})]},r))})]}),t.top_students&&t.top_students.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Performing Students"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Admission No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Exams Taken"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Best Score"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.top_students.map((s,r)=>e.jsxs("tr",{className:r<3?"bg-yellow-50":"",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[r===0&&e.jsx("span",{className:"text-2xl",children:"ðŸ¥‡"}),r===1&&e.jsx("span",{className:"text-2xl",children:"ðŸ¥ˆ"}),r===2&&e.jsx("span",{className:"text-2xl",children:"ðŸ¥‰"}),r>=3&&e.jsx("span",{className:"font-medium text-gray-900",children:r+1})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.admission_no}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.exams_taken}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 py-1 text-sm font-semibold bg-green-100 text-green-800 rounded",children:[s.avg_score,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 py-1 text-sm font-semibold bg-primary-100 text-primary-700 rounded",children:[s.best_score,"%"]})})]},s.id))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsxs(i,{to:"/teacher/cbt/questions",className:"bg-green-50 border-2 border-green-600 rounded-lg p-6 block group hover:bg-green-100 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-green-900",children:"Question Bank"}),e.jsx("div",{className:"bg-green-600 p-2 rounded-lg group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("p",{className:"text-green-700 mb-4",children:"Create and manage reusable questions for your exams"}),e.jsxs("div",{className:"flex items-center text-green-600 font-medium group-hover:translate-x-2 transition-transform",children:["Manage Questions",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),e.jsxs(i,{to:"/teacher/cbt/exams",className:"bg-primary-50 border-2 border-primary-500 rounded-lg p-6 block group hover:bg-primary-100 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-primary-900",children:"Exam Management"}),e.jsx("div",{className:"bg-primary-500 p-2 rounded-lg group-hover:scale-110 transition-transform",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),e.jsx("p",{className:"text-primary-700 mb-4",children:"Create, publish, and monitor your CBT exams"}),e.jsxs("div",{className:"flex items-center text-primary-600 font-medium group-hover:translate-x-2 transition-transform",children:["Manage Exams",e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})]})};export{p as default};
