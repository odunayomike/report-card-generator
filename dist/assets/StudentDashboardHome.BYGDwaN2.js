import{r as n,A as w,j as e,L as d}from"./index.UZcXu8dh.js";function _(){const[r,m]=n.useState({total_exams:0,available_exams:0,completed_exams:0,average_score:0}),[o,g]=n.useState([]),[h,u]=n.useState(!0),i=JSON.parse(localStorage.getItem("studentData")||"{}");n.useEffect(()=>{j()},[]);const j=async()=>{try{const l=await(await fetch(`${w}/cbt/student-exams?action=list`,{credentials:"include"})).json();if(l.success){const a=l.exams||[],v=a.length,N=a.filter(t=>t.status==="available"||t.status==="in_progress").length,f=a.filter(t=>t.status==="completed").length,c=a.filter(t=>t.status==="completed"&&t.score!=null).map(t=>t.score/t.total_marks*100),y=c.length>0?c.reduce((t,x)=>t+x,0)/c.length:0;m({total_exams:v,available_exams:N,completed_exams:f,average_score:Math.round(y)}),g(a.slice(0,5))}}catch(s){console.error("Error loading dashboard:",s)}finally{u(!1)}},p=s=>({available:"bg-green-100 text-green-800",upcoming:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",expired:"bg-red-100 text-red-800",completed:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",b=s=>({available:"Available",upcoming:"Upcoming",in_progress:"In Progress",expired:"Expired",completed:"Completed"})[s]||s;return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",i.name,"!"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Class: ",i.class," | Admission No: ",i.admission_no]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Exams"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:r.total_exams})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Available"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:r.available_exams})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:r.completed_exams})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Average Score"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:[r.average_score,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Exams"}),e.jsx(d,{to:"/student/exams",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"View all →"})]})}),o.length===0?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No exams assigned yet."}):e.jsx("div",{className:"divide-y divide-gray-200",children:o.map(s=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.exam_title}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${p(s.status)}`,children:b(s.status)})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.subject," • ",s.duration_minutes," minutes • ",s.total_marks," marks"]}),s.status==="completed"&&s.score!=null&&e.jsxs("p",{className:"text-sm text-green-600 mt-1 font-medium",children:["Score: ",s.score,"/",s.total_marks," (",Math.round(s.score/s.total_marks*100),"%)"]})]}),e.jsxs("div",{className:"ml-4",children:[(s.status==="available"||s.status==="in_progress")&&e.jsx(d,{to:`/student/take-exam/${s.id}`,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-block text-sm",children:s.status==="in_progress"?"Continue":"Start"}),s.status==="completed"&&e.jsx(d,{to:`/student/results/${s.id}`,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 inline-block text-sm",children:"View Results"})]})]})},s.id))})]})]})}export{_ as default};
