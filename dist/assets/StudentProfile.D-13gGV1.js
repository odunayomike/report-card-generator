import{E as b,u as N,v,w as y,r as i,j as e}from"./index.UZcXu8dh.js";import{m as w}from"./api.CIjYu6Aj.js";function L(){const{admissionNo:o}=b(),n=N(),m=v(),{toast:d}=y(),[t,h]=i.useState(null),[p,c]=i.useState(!0),l=m.pathname.startsWith("/teacher");i.useEffect(()=>{u()},[o]);const u=async()=>{try{c(!0);const s=await w(o);s.success?h(s):(d.error("Error loading profile: "+s.message),n(`${l?"/teacher":"/dashboard"}/students`))}catch(s){console.error("Error:",s),d.error("Failed to load profile. Please try again."),n(`${l?"/teacher":"/dashboard"}/students`)}finally{c(!1)}},g=s=>{n(`${l?"/teacher":"/dashboard"}/reports/${s}`)},j=s=>{n(`${l?"/teacher":"/dashboard"}/reports/${s}/edit`)};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>n("/dashboard/students"),className:"text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Students"]})}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-purple-600 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white bg-white flex items-center justify-center overflow-hidden",children:t.studentInfo.photo?e.jsx("img",{src:t.studentInfo.photo,alt:"Student",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:t.studentInfo.name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:t.studentInfo.name}),e.jsxs("p",{className:"text-primary-100 text-sm",children:["Admission No: ",t.studentInfo.admissionNo]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"bg-white/20 rounded-lg px-3 py-2",children:[e.jsx("p",{className:"text-primary-100 text-xs",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.totalReports})]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Gender"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.studentInfo.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Height"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.studentInfo.height," cm"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Weight"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[t.studentInfo.weight," kg"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Club/Society"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.studentInfo.clubSociety||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Favorite Color"}),e.jsx("p",{className:"text-sm text-gray-900",children:t.studentInfo.favCol||"N/A"})]})]}),e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3 mt-6",children:"Academic Journey"}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-purple-50 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Class Progression"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(t.reports.map(s=>s.class))].map((s,a,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-primary-600 text-white",children:s}),a<r.length-1&&e.jsx("svg",{className:"w-5 h-5 text-primary-400 mx-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},s))}),e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Total Classes: ",[...new Set(t.reports.map(s=>s.class))].length," | Sessions: ",[...new Set(t.reports.map(s=>s.session))].length]})]}),e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:["All Report Cards (",t.totalReports,")"]}),!t.reports||t.reports.length===0||t.totalReports===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Report Cards Generated"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This student doesn't have any report cards yet."}),e.jsx("button",{onClick:()=>n("/dashboard/create"),className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700",children:"Create Report Card"})]}):Object.entries(t.reports.reduce((s,a)=>{const r=`${a.session} - ${a.class}`;return s[r]||(s[r]=[]),s[r].push(a),s},{})).map(([s,a])=>e.jsxs("div",{className:"mb-5",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:a.sort((r,f)=>{const x={"First Term":1,"Second Term":2,"Third Term":3};return x[r.term]-x[f.term]}).map(r=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-3 hover:border-primary-500 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:r.term}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created: ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${r.term==="First Term"?"bg-green-100 text-green-800":r.term==="Second Term"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:r.term.split(" ")[0]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>g(r.id),className:"flex-1 px-2 py-1.5 bg-primary-600 text-white text-xs rounded-md hover:bg-primary-700 transition-colors flex items-center justify-center gap-1",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs("button",{onClick:()=>j(r.id),className:"flex-1 px-2 py-1.5 bg-green-600 text-white text-xs rounded-md hover:bg-green-700 transition-colors flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]},r.id))})]},s))]})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Profile not found"})})}export{L as default};
