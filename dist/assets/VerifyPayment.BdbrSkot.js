import{u,W as h,r as l,j as e}from"./index.UZcXu8dh.js";import{L as f}from"./api.CIjYu6Aj.js";const y=()=>{const t=u(),[c]=h(),[o,a]=l.useState("verifying"),[d,r]=l.useState(""),[n,m]=l.useState(null);l.useEffect(()=>{const i=c.get("reference");if(!i){a("failed"),r("No payment reference provided");return}x(i)},[c]);const x=async i=>{try{const s=await f(i);s.success?(a("success"),r(s.message||"Payment verified successfully!"),m(s.subscription),setTimeout(()=>{t("/dashboard")},3e3)):(a("failed"),r(s.message||"Payment verification failed"))}catch(s){console.error("Error verifying payment:",s),a("failed"),r("An error occurred while verifying your payment")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl p-8",children:[o==="verifying"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Verifying Payment"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your payment..."})]}),o==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d}),n&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6 text-left",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Subscription Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"font-semibold text-green-700",children:n.status.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-semibold",children:new Date(n.start_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"font-semibold",children:new Date(n.end_date).toLocaleDateString()})]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Redirecting to dashboard in 3 seconds..."}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200",children:"Go to Dashboard Now"})]}),o==="failed"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-10 w-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>t("/subscription"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200",children:"Try Again"}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-4 rounded-lg transition-colors duration-200",children:"Back to Dashboard"})]})]})]})})};export{y as default};
