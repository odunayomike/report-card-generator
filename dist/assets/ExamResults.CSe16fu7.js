import{E as p,r as a,A as y,j as e,L as v}from"./index.UZcXu8dh.js";const k=()=>{const{examId:l}=p(),[t,h]=a.useState(null),[g,j]=a.useState(!0),[i,c]=a.useState("");a.useEffect(()=>{b()},[l]);const b=async()=>{try{const r=await(await fetch(`${y}/cbt/student-exams?action=results&exam_id=${l}`,{credentials:"include"})).json();r.success?h(r):c(r.message||"Failed to load results")}catch(s){c("Failed to load results"),console.error("Load results error:",s)}finally{j(!1)}},f=s=>s>=70?{grade:"A",color:"text-green-600",bg:"bg-green-100"}:s>=60?{grade:"B",color:"text-blue-600",bg:"bg-blue-100"}:s>=50?{grade:"C",color:"text-yellow-600",bg:"bg-yellow-100"}:s>=40?{grade:"D",color:"text-orange-600",bg:"bg-orange-100"}:{grade:"F",color:"text-red-600",bg:"bg-red-100"};if(g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading results..."})]})});if(i)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-6 py-4 rounded-lg max-w-md",children:i})});const d=parseFloat(t.percentage)||0,N=parseFloat(t.total_score)||0,o=parseFloat(t.total_marks)||0,x=parseInt(t.correct_answers)||0,m=parseInt(t.wrong_answers)||0,u=parseFloat(t.time_taken_minutes)||0,n=f(d);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-2",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Exam Completed!"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.exam_title," - ",t.subject]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 ${n.bg} rounded-full mb-3`,children:e.jsx("span",{className:`text-5xl font-bold ${n.color}`,children:n.grade})}),e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-1",children:[N," / ",o]}),e.jsxs("p",{className:"text-lg text-gray-600",children:[d.toFixed(1),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 bg-green-100 rounded-full mb-1",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:x}),e.jsx("p",{className:"text-xs text-gray-600",children:"Correct"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 bg-red-100 rounded-full mb-1",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:m}),e.jsx("p",{className:"text-xs text-gray-600",children:"Wrong"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 bg-blue-100 rounded-full mb-1",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:u.toFixed(0)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Minutes"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Exam Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subject:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.subject})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Questions:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x+m})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Marks:"}),e.jsx("span",{className:"font-medium text-gray-900",children:o})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Time Taken:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[u.toFixed(0)," minutes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submitted:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.submitted_at?new Date(t.submitted_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex items-start gap-2 text-xs bg-blue-50 p-3 rounded",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-blue-800",children:"Score automatically added to your report card!"})]})})]})]}),t.question_details&&t.question_details.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Answer Summary"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:t.question_details.map((s,r)=>e.jsxs("div",{className:`text-center p-2 rounded border-2 ${s.is_correct?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,title:s.is_correct?"Correct":`Wrong - Correct answer: ${s.correct_answer}`,children:[e.jsxs("p",{className:"text-xs font-medium text-gray-700",children:["Q",r+1]}),e.jsx("p",{className:`text-lg font-bold ${s.is_correct?"text-green-600":"text-red-600"}`,children:s.is_correct?"✓":"✗"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.marks_awarded,"/",s.marks]})]},r))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(v,{to:"/student/exams",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium",children:"Back to My Exams"})})]})})};export{k as default};
